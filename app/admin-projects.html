<!doctype html><html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width,initial-scale=1'><title>Admin Projects</title><link rel='stylesheet' href='/styles.css'></head><body><main><div class='card'><h1>Admin Dashboard</h1><p><a id='metricsLink' href='/admin/metrics'>Metrics</a></p><table class='table' id='tbl'><thead><tr><th>Client</th><th>SF ID</th><th>Status</th><th>Updated</th></tr></thead><tbody></tbody></table></div></main><script>
const params=new URLSearchParams(location.search);const key=params.get('key')||'';document.getElementById('metricsLink').href='/admin/metrics?key='+encodeURIComponent(key);fetch(`/api/admin/projects?key=${encodeURIComponent(key)}`).then(r=>r.json()).then(data=>{const tb=document.querySelector('#tbl tbody');(data.projects||[]).forEach(p=>{const tr=document.createElement('tr');const href=`/status?sf_id=${encodeURIComponent(p.sf_id)}&sig=${encodeURIComponent(p.link_sig)}&key=${encodeURIComponent(key)}&mode=admin`;tr.innerHTML=`<td><a href="${href}">${p.task_name||'Untitled'}</a></td><td>${p.sf_id}</td><td><span class='pill'>${p.task_status||''}</span></td><td>${p.source_updated_at||''}</td>`;tb.appendChild(tr);});}).catch(e=>{document.body.innerHTML='<main><div class=card><h2>Load failed</h2><p>'+String(e)+'</p></div></main>'});
</script></body></html>
